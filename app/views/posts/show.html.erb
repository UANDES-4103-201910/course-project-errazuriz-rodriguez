<html lang="en">
<head>
  <title>CSS Template</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<hr>

<body>

<div class="c" >
  <titulo><%= @post.title %>     <sub><small><small><mark> <%= link_to 'By  ' + @user.find_by(id: @post.user_id).name , @user.find_by(id: @post.user_id) %></mark></small></small></sub></titulo>
<hr>

<section>
  <nav>
    <ul>
      <%= link_to "Like", likes_path(:post => @post.id) %>/<%= link_to "Dislike", dislikes_path(:post => @post.id) %>
      <li><a href="#">Flag as Inappropriate</a></li>
    </ul>
    <p>Likes: <%= @likes%></p>
    <p>DisLikes: <%= @dislikes%></p>
  </nav>
  
  <article>
    <h1>Description</h1>
    <%= @post.description %>
  </article>

  <article>
  <h1>Images</h1>
  <% (0...@post.postimages.count).each do |postimage| %>
    <%= image_tag(@post.postimages[postimage].variant(resize: "200x200")) %>
  <% end %>
  </article>

  <article>
    <h1>Location</h1>
    <%= @post.location %>
  </article>

  <article>
    <h1>Files</h1>
    <% (0...@post.files.count).each do |file| %>
      <%= link_to 'Download', @post.files[file], download:"" %>
    <% end %>
  </article>

  </div>
  
</section>
<footer>
  <h1>Comments</h1>
  <table class = "scroll">
    <tbody>
      <% @comments.each do |cm| %>
        <% if cm.visible%>
          <tr>
            <td><%= link_to @user.find_by(id: cm.user_id).name, @user.find_by(id: cm.user_id)%>:  </td>
            <td><%= cm.created_at %>:  </td>
            <td><%= cm.comment %></td>
            <td><%= (UserLikeComment.all.where(comment_id: cm.id).where(like: true)).length %>
            <td><%= (UserLikeComment.all.where(comment_id: cm.id).where(like: false)).length %>
            <td><%= button_to "Like", commentLike_path(:post => @post.id, :comment => cm.id), :class => "btn btn-primary btn-md" %>
            <td><%= button_to "Dislike", commentDisLike_path(:post => @post.id, :comment => cm.id), :class => "btn btn-primary btn-md" %>
            <% if current_user.admin %>
              <td><%= link_to "Hide", hideComment_path(:post => @post.id, :comment => cm.id) %>
            <% end %>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
  <li class = "l"> Add new comment.</li>
  <div>
    <%= form_for([@post, @post.comments.build]) do |f| %>
      <%= f.text_area :comment %>
      <%= f.submit "Send", :class => "btn btn-primary btn-md"%>
    <% end %>
  </div>
</footer>

</body>
</html>
